# B站视频解析下载工具

这是一个用Python写的B站视频解析下载工具，可以帮助你轻松下载B站的视频内容，支持番剧、合集等多种类型的视频。

## 功能特点

- ✅ 支持BV号、ss号、av号解析
- ✅ 支持番剧和合集视频下载
- ✅ 支持多种清晰度选择
- ✅ 支持批量下载多集视频
- ✅ 支持HEVC编码视频（需要安装扩展）
- ✅ 支持Cookie登录，可下载会员专属内容
- ✅ 取消下载时自动清理临时文件
- ✅ 简洁美观的界面，操作简单易懂
- ✅ 任务列表实时更新，保持滚动位置和选中状态
- ✅ 下载窗口关闭后任务在后台继续运行
- ✅ 下载中任务支持查看详情和停止操作
- ✅ 任务详细窗口支持文件列表搜索筛选
- ✅ 文件列表支持右键菜单操作
- ✅ 所有状态实时获取和更新

## 如何使用

### 1. 准备环境
- Python 3.7+
- PyQt5
- requests

### 2. 安装依赖
```bash
pip install PyQt5 requests
```

### 3. 运行程序
```bash
python main.py
```

### 4. 使用步骤
1. 在"视频链接"输入框中粘贴B站视频链接
2. 点击"解析链接"按钮
3. 选择要下载的集数（番剧或合集）
4. 选择视频清晰度
5. 选择保存路径
6. 点击"开始下载"按钮

### 5. Cookie设置
- 如果你需要下载会员专属内容，可以在"Cookie设置"区域输入你的B站Cookie
- Cookie获取方法：在浏览器中登录B站，打开开发者工具，复制Cookie字符串
- 点击"验证并保存"按钮，程序会自动验证Cookie是否有效

## 常见问题

### Q: 解析失败怎么办？
A: 检查链接是否正确，确保是有效的B站视频链接。如果是番剧，可能需要登录后才能解析。

### Q: 下载失败怎么办？
A: 检查网络连接是否正常，确保保存路径有写入权限。如果是会员内容，确保Cookie有效。

### Q: 视频没有声音怎么办？
A: 这是正常现象，程序会自动合并视频和音频，下载完成后就有声音了。

### Q: HEVC编码是什么？
A: HEVC是一种高效的视频编码格式，可以在相同画质下减小文件大小，或者在相同文件大小下提高画质。

## 注意事项

- 本工具仅供个人学习使用，请勿用于商业用途
- 请遵守B站的用户协议，不要下载版权受限的内容
- 下载视频时请注意网络带宽和存储空间
- 如遇问题，请检查日志文件获取详细信息

## 联系方式

作者：寒烟似雪逸雨
QQ：2273962061/3241417097
哔哩哔哩：不会玩python的man
个人主页：https://space.bilibili.com/3546841002019157

## 更新日志

### v1.3.0
- 优化任务列表刷新机制，保持滚动位置和选中状态
- 修改下载窗口关闭行为，关闭后任务在后台继续运行
- 为下载中任务添加"查看下载"和"停止下载"按钮
- 优化任务详细窗口，使用列表展示文件，支持搜索筛选
- 添加文件列表右键菜单功能，方便操作
- 确保所有状态实时获取和更新
- 优化代码结构，提高程序性能

### v1.2.0
- 实现任务状态实时更新
- 添加任务详情窗口，支持查看下载文件列表
- 实现文件存在检测，支持打开文件和重新下载
- 优化任务管理界面，提高用户体验

### v1.1.0
- 添加线程数选择功能
- 添加环境检查工具
- 修复下载完成后闪退的问题
- 优化Cookie验证和管理功能

### v1.0.0
- 初始版本，支持基本的视频解析和下载功能
- 支持番剧和合集视频
- 支持多种清晰度选择
- 支持批量下载
- 支持Cookie登录
- 支持HEVC编码视频